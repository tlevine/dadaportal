{% extends 'base.html' %}

{% block top_search %}{% endblock %}

{% block base %}
  <h1 class="centered-heading">Search the Dada Portal</h1>

  <form method="get" action="." class="haystack-search">
    {{ form.as_p }}
    <p><input type="submit" value="Search"></p>
  </form>

  {% if query %}
  <section>
    <h2 class="centered-heading">Results</h2>

    <dl>
      {% for result in page.object_list %}
      <dt><a href="{{ result.url }}">{{ result.title }}</a></dt>
      <dd>{{ result.description }}</dd>
      {% empty %}
      <p>No results found.</p>
      {% endfor %}
    </dl>

    {% if page.has_previous or page.has_next %}
    <footer>
      {% if page.has_previous %}
      <a href="?q={{ query }}&amp;page={{ page.previous_page_number }}">
      {% endif %}
        &laquo; Previous
      {% if page.has_previous %}
      </a>
      {% endif %}

      |

      {% if page.has_next %}
      <a href="?q={{ query }}&amp;page={{ page.next_page_number }}">
      {% endif %}
        Next &raquo;
      {% if page.has_next %}
      </a>
      {% endif %}
    </footer>
    {% endif %}
  </section>

  {% else %}
  {# Show some example queries to run, maybe query syntax, something else? #}
  {% endif %}
{% endblock %}
